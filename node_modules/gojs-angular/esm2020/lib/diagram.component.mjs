import { Component, ElementRef, EventEmitter, Input, NgZone, Output, ViewChild } from '@angular/core';
import * as go from 'gojs';
import { NgDiagramHelper } from './ng-diagram-helper';
import * as i0 from "@angular/core";
export class DiagramComponent {
    constructor(zone) {
        this.zone = zone;
        /**  Link data for diagram. Optional. */
        this.linkDataArray = null;
        /** Model data for diagram. Optional. */
        this.modelData = null;
        /** Model changed listener function for diagram */
        this.modelChangedListener = null;
        /** Whether or not to skip merging app data with GoJS model data (set to true if update is coming from GoJS, false if coming from app-level, usually) */
        this.skipsDiagramUpdate = false;
        /** Event emitter -- fires when diagram model changes. Capture this emitted event in parent component */
        this.modelChange = new EventEmitter();
        /** The Diagram itself */
        this.diagram = null;
        /** An internal flag used to tell ngOnChanges to treat the next sync operation as a Diagram initialization */
        this.wasCleared = false;
    }
    /**
     * Initializes diagram / model after view init
     */
    ngAfterViewInit() {
        if (!this.diagramDiv) {
            throw new Error("diagramDiv is not defined");
        }
        this.diagram = this.initDiagram();
        if (!(this.diagram instanceof go.Diagram)) {
            throw new Error("initDiagram function did not return a go.Diagram");
        }
        // reduces change detection on mouse moves, boosting performance
        NgDiagramHelper.makeMouseMoveRunOutsideAngularZone(this.diagram, this.zone);
        // assign the Diagram's div, which (among many other things) will attach a bunch of listeners to the canvas,
        // using the overridden addEventListener function defined in makeMouseMoveRunOutsideAngularZone
        const divRef = this.diagramDiv.nativeElement;
        if (divRef === null)
            return;
        this.diagram.div = divRef;
        // initialize the diagram model with the provided node / link / model data
        NgDiagramHelper.initializeModel(this.diagram, this.nodeDataArray, this.linkDataArray, this.modelData);
        // initializer model listener
        NgDiagramHelper.initializeModelChangedListener(this);
    } // end ngAfterViewInit
    /**
     * If a change has occurred on an @Input property, merge the app-level changes with GoJS
     */
    ngOnChanges() {
        if (!this.diagram || !this.diagram.model || this.skipsDiagramUpdate)
            return;
        // if clear was just called, treat this as initial
        if (this.wasCleared) {
            this.diagram.delayInitialization(() => {
                NgDiagramHelper.mergeAppDataWithModel(this, true);
            });
            this.wasCleared = false;
        }
        else {
            NgDiagramHelper.mergeAppDataWithModel(this);
        }
    } // end ngOnChanges
    /**
     * Clears the diagram of all nodes, links, and model data.
     * Also clears the UndoManager history and clipboard.
     * The next state update will be treated as diagram initialization.
     */
    clear() {
        const diagram = this.diagram;
        if (diagram !== null) {
            diagram.clear();
            this.wasCleared = true;
        }
    } // end clear function
    /**
     * Set this.diagram.div to null, removing all event listeners
     */
    ngOnDestroy() {
        this.diagram.div = null; // removes event listeners
    } // end ngOnDestroy function
}
/** @nocollapse */ DiagramComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.1.2", ngImport: i0, type: DiagramComponent, deps: [{ token: i0.NgZone }], target: i0.ɵɵFactoryTarget.Component });
/** @nocollapse */ DiagramComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.1.2", type: DiagramComponent, selector: "gojs-diagram", inputs: { initDiagram: "initDiagram", nodeDataArray: "nodeDataArray", linkDataArray: "linkDataArray", modelData: "modelData", divClassName: "divClassName", skipsDiagramUpdate: "skipsDiagramUpdate" }, outputs: { modelChange: "modelChange" }, viewQueries: [{ propertyName: "diagramDiv", first: true, predicate: ["ngDiagram"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: '<div #ngDiagram [className]=divClassName></div>', isInline: true });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.1.2", ngImport: i0, type: DiagramComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'gojs-diagram',
                    template: '<div #ngDiagram [className]=divClassName></div>'
                }]
        }], ctorParameters: function () { return [{ type: i0.NgZone }]; }, propDecorators: { initDiagram: [{
                type: Input
            }], nodeDataArray: [{
                type: Input
            }], linkDataArray: [{
                type: Input
            }], modelData: [{
                type: Input
            }], divClassName: [{
                type: Input
            }], skipsDiagramUpdate: [{
                type: Input
            }], modelChange: [{
                type: Output
            }], diagramDiv: [{
                type: ViewChild,
                args: ['ngDiagram', { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlhZ3JhbS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9nb2pzLWFuZ3VsYXIvc3JjL2xpYi9kaWFncmFtLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3RHLE9BQU8sS0FBSyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzNCLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQzs7QUFNdEQsTUFBTSxPQUFPLGdCQUFnQjtJQTRCM0IsWUFBbUIsSUFBWTtRQUFaLFNBQUksR0FBSixJQUFJLENBQVE7UUFuQi9CLHdDQUF3QztRQUN4QixrQkFBYSxHQUF5QixJQUFJLENBQUM7UUFDM0Qsd0NBQXdDO1FBQ3hCLGNBQVMsR0FBa0IsSUFBSSxDQUFDO1FBR2hELGtEQUFrRDtRQUMzQyx5QkFBb0IsR0FBMEMsSUFBSSxDQUFDO1FBQzFFLHdKQUF3SjtRQUN4SSx1QkFBa0IsR0FBWSxLQUFLLENBQUM7UUFDcEQsd0dBQXdHO1FBQ3ZGLGdCQUFXLEdBQXFDLElBQUksWUFBWSxFQUFzQixDQUFDO1FBR3hHLHlCQUF5QjtRQUNsQixZQUFPLEdBQWUsSUFBSSxDQUFDO1FBQ2xDLDZHQUE2RztRQUNyRyxlQUFVLEdBQUcsS0FBSyxDQUFDO0lBRVMsQ0FBQztJQUVyQzs7T0FFRztJQUNJLGVBQWU7UUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDcEIsTUFBTSxJQUFJLEtBQUssQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1NBQzlDO1FBQ0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbEMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sWUFBWSxFQUFFLENBQUMsT0FBTyxDQUFDLEVBQUU7WUFDekMsTUFBTSxJQUFJLEtBQUssQ0FBQyxrREFBa0QsQ0FBQyxDQUFDO1NBQ3JFO1FBRUQsZ0VBQWdFO1FBQ2hFLGVBQWUsQ0FBQyxrQ0FBa0MsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUU1RSw0R0FBNEc7UUFDNUcsK0ZBQStGO1FBQy9GLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDO1FBQzdDLElBQUksTUFBTSxLQUFLLElBQUk7WUFBRSxPQUFPO1FBQzVCLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQztRQUUxQiwwRUFBMEU7UUFDMUUsZUFBZSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdEcsNkJBQTZCO1FBQzdCLGVBQWUsQ0FBQyw4QkFBOEIsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN2RCxDQUFDLENBQUMsc0JBQXNCO0lBRXhCOztPQUVHO0lBQ0ksV0FBVztRQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxrQkFBa0I7WUFBRSxPQUFPO1FBQzVFLGtEQUFrRDtRQUNsRCxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUU7WUFDbkIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxHQUFHLEVBQUU7Z0JBQ3BDLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFDcEQsQ0FBQyxDQUFDLENBQUM7WUFDSCxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssQ0FBQztTQUN6QjthQUFNO1lBQ0wsZUFBZSxDQUFDLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzdDO0lBQ0gsQ0FBQyxDQUFDLGtCQUFrQjtJQUVwQjs7OztPQUlHO0lBQ0ssS0FBSztRQUNYLE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDN0IsSUFBSSxPQUFPLEtBQUssSUFBSSxFQUFFO1lBQ3BCLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNoQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztTQUN4QjtJQUNILENBQUMsQ0FBQyxxQkFBcUI7SUFFdkI7O09BRUc7SUFDSSxXQUFXO1FBQ2hCLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDLDBCQUEwQjtJQUNyRCxDQUFDLENBQUMsMkJBQTJCOztnSUEzRmxCLGdCQUFnQjtvSEFBaEIsZ0JBQWdCLGliQUZqQixpREFBaUQ7MkZBRWhELGdCQUFnQjtrQkFKNUIsU0FBUzttQkFBQztvQkFDVCxRQUFRLEVBQUUsY0FBYztvQkFDeEIsUUFBUSxFQUFFLGlEQUFpRDtpQkFDNUQ7NkZBT2lCLFdBQVc7c0JBQTFCLEtBQUs7Z0JBRVUsYUFBYTtzQkFBNUIsS0FBSztnQkFFVSxhQUFhO3NCQUE1QixLQUFLO2dCQUVVLFNBQVM7c0JBQXhCLEtBQUs7Z0JBRVUsWUFBWTtzQkFBM0IsS0FBSztnQkFJVSxrQkFBa0I7c0JBQWpDLEtBQUs7Z0JBRVcsV0FBVztzQkFBM0IsTUFBTTtnQkFFMEMsVUFBVTtzQkFBMUQsU0FBUzt1QkFBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBFdmVudEVtaXR0ZXIsIElucHV0LCBOZ1pvbmUsIE91dHB1dCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCAqIGFzIGdvIGZyb20gJ2dvanMnO1xyXG5pbXBvcnQgeyBOZ0RpYWdyYW1IZWxwZXIgfSBmcm9tICcuL25nLWRpYWdyYW0taGVscGVyJztcclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnZ29qcy1kaWFncmFtJyxcclxuICB0ZW1wbGF0ZTogJzxkaXYgI25nRGlhZ3JhbSBbY2xhc3NOYW1lXT1kaXZDbGFzc05hbWU+PC9kaXY+J1xyXG59KVxyXG5leHBvcnQgY2xhc3MgRGlhZ3JhbUNvbXBvbmVudCB7XHJcblxyXG4gIC8qKlxyXG4gICAqIERpYWdyYW0gaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIFJldHVybnMgYSBnby5EaWFncmFtLlxyXG4gICAqIERvIG5vdCBpbml0aWFsaXplIG1vZGVsIGRhdGEgaW4gdGhpcyBmdW5jdGlvbi5cclxuICAgKi9cclxuICBASW5wdXQoKSBwdWJsaWMgaW5pdERpYWdyYW06ICgpID0+IGdvLkRpYWdyYW07XHJcbiAgLyoqICBOb2RlIGRhdGEgZm9yIGRpYWdyYW0gKi9cclxuICBASW5wdXQoKSBwdWJsaWMgbm9kZURhdGFBcnJheTogQXJyYXk8Z28uT2JqZWN0RGF0YT47XHJcbiAgLyoqICBMaW5rIGRhdGEgZm9yIGRpYWdyYW0uIE9wdGlvbmFsLiAqL1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBsaW5rRGF0YUFycmF5OiBBcnJheTxnby5PYmplY3REYXRhPiA9IG51bGw7XHJcbiAgLyoqIE1vZGVsIGRhdGEgZm9yIGRpYWdyYW0uIE9wdGlvbmFsLiAqL1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBtb2RlbERhdGE6IGdvLk9iamVjdERhdGEgPSBudWxsO1xyXG4gIC8qKiBEaWFncmFtIGRpdiBjbGFzcyBuYW1lLiBVc2UgdGhpcyBuYW1lIHRvIHN0eWxlIHlvdXIgZGlhZ3JhbSBpbiBDU1MuICovXHJcbiAgQElucHV0KCkgcHVibGljIGRpdkNsYXNzTmFtZTogc3RyaW5nO1xyXG4gIC8qKiBNb2RlbCBjaGFuZ2VkIGxpc3RlbmVyIGZ1bmN0aW9uIGZvciBkaWFncmFtICovXHJcbiAgcHVibGljIG1vZGVsQ2hhbmdlZExpc3RlbmVyOiAoKGU6IGdvLkNoYW5nZWRFdmVudCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcclxuICAvKiogV2hldGhlciBvciBub3QgdG8gc2tpcCBtZXJnaW5nIGFwcCBkYXRhIHdpdGggR29KUyBtb2RlbCBkYXRhIChzZXQgdG8gdHJ1ZSBpZiB1cGRhdGUgaXMgY29taW5nIGZyb20gR29KUywgZmFsc2UgaWYgY29taW5nIGZyb20gYXBwLWxldmVsLCB1c3VhbGx5KSAqL1xyXG4gIEBJbnB1dCgpIHB1YmxpYyBza2lwc0RpYWdyYW1VcGRhdGU6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAvKiogRXZlbnQgZW1pdHRlciAtLSBmaXJlcyB3aGVuIGRpYWdyYW0gbW9kZWwgY2hhbmdlcy4gQ2FwdHVyZSB0aGlzIGVtaXR0ZWQgZXZlbnQgaW4gcGFyZW50IGNvbXBvbmVudCAqL1xyXG4gIEBPdXRwdXQoKSBwdWJsaWMgbW9kZWxDaGFuZ2U6IEV2ZW50RW1pdHRlcjxnby5JbmNyZW1lbnRhbERhdGE+ID0gbmV3IEV2ZW50RW1pdHRlcjxnby5JbmNyZW1lbnRhbERhdGE+KCk7XHJcbiAgLyoqIFRoZSBESVYgZWxlbWVudCBob2xkaW5nIHRoZSBEaWFncmFtICovXHJcbiAgQFZpZXdDaGlsZCgnbmdEaWFncmFtJywgeyBzdGF0aWM6IHRydWUgfSkgcHVibGljIGRpYWdyYW1EaXY6IEVsZW1lbnRSZWY7XHJcbiAgLyoqIFRoZSBEaWFncmFtIGl0c2VsZiAqL1xyXG4gIHB1YmxpYyBkaWFncmFtOiBnby5EaWFncmFtID0gbnVsbDtcclxuICAvKiogQW4gaW50ZXJuYWwgZmxhZyB1c2VkIHRvIHRlbGwgbmdPbkNoYW5nZXMgdG8gdHJlYXQgdGhlIG5leHQgc3luYyBvcGVyYXRpb24gYXMgYSBEaWFncmFtIGluaXRpYWxpemF0aW9uICovXHJcbiAgcHJpdmF0ZSB3YXNDbGVhcmVkID0gZmFsc2U7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB6b25lOiBOZ1pvbmUpIHsgIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSW5pdGlhbGl6ZXMgZGlhZ3JhbSAvIG1vZGVsIGFmdGVyIHZpZXcgaW5pdFxyXG4gICAqL1xyXG4gIHB1YmxpYyBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICBpZiAoIXRoaXMuZGlhZ3JhbURpdikge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJkaWFncmFtRGl2IGlzIG5vdCBkZWZpbmVkXCIpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5kaWFncmFtID0gdGhpcy5pbml0RGlhZ3JhbSgpO1xyXG4gICAgaWYgKCEodGhpcy5kaWFncmFtIGluc3RhbmNlb2YgZ28uRGlhZ3JhbSkpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaW5pdERpYWdyYW0gZnVuY3Rpb24gZGlkIG5vdCByZXR1cm4gYSBnby5EaWFncmFtXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHJlZHVjZXMgY2hhbmdlIGRldGVjdGlvbiBvbiBtb3VzZSBtb3ZlcywgYm9vc3RpbmcgcGVyZm9ybWFuY2VcclxuICAgIE5nRGlhZ3JhbUhlbHBlci5tYWtlTW91c2VNb3ZlUnVuT3V0c2lkZUFuZ3VsYXJab25lKHRoaXMuZGlhZ3JhbSwgdGhpcy56b25lKTtcclxuXHJcbiAgICAvLyBhc3NpZ24gdGhlIERpYWdyYW0ncyBkaXYsIHdoaWNoIChhbW9uZyBtYW55IG90aGVyIHRoaW5ncykgd2lsbCBhdHRhY2ggYSBidW5jaCBvZiBsaXN0ZW5lcnMgdG8gdGhlIGNhbnZhcyxcclxuICAgIC8vIHVzaW5nIHRoZSBvdmVycmlkZGVuIGFkZEV2ZW50TGlzdGVuZXIgZnVuY3Rpb24gZGVmaW5lZCBpbiBtYWtlTW91c2VNb3ZlUnVuT3V0c2lkZUFuZ3VsYXJab25lXHJcbiAgICBjb25zdCBkaXZSZWYgPSB0aGlzLmRpYWdyYW1EaXYubmF0aXZlRWxlbWVudDtcclxuICAgIGlmIChkaXZSZWYgPT09IG51bGwpIHJldHVybjtcclxuICAgIHRoaXMuZGlhZ3JhbS5kaXYgPSBkaXZSZWY7XHJcblxyXG4gICAgLy8gaW5pdGlhbGl6ZSB0aGUgZGlhZ3JhbSBtb2RlbCB3aXRoIHRoZSBwcm92aWRlZCBub2RlIC8gbGluayAvIG1vZGVsIGRhdGFcclxuICAgIE5nRGlhZ3JhbUhlbHBlci5pbml0aWFsaXplTW9kZWwodGhpcy5kaWFncmFtLCB0aGlzLm5vZGVEYXRhQXJyYXksIHRoaXMubGlua0RhdGFBcnJheSwgdGhpcy5tb2RlbERhdGEpO1xyXG4gICAgLy8gaW5pdGlhbGl6ZXIgbW9kZWwgbGlzdGVuZXJcclxuICAgIE5nRGlhZ3JhbUhlbHBlci5pbml0aWFsaXplTW9kZWxDaGFuZ2VkTGlzdGVuZXIodGhpcyk7XHJcbiAgfSAvLyBlbmQgbmdBZnRlclZpZXdJbml0XHJcblxyXG4gIC8qKlxyXG4gICAqIElmIGEgY2hhbmdlIGhhcyBvY2N1cnJlZCBvbiBhbiBASW5wdXQgcHJvcGVydHksIG1lcmdlIHRoZSBhcHAtbGV2ZWwgY2hhbmdlcyB3aXRoIEdvSlNcclxuICAgKi9cclxuICBwdWJsaWMgbmdPbkNoYW5nZXMoKSB7XHJcbiAgICBpZiAoIXRoaXMuZGlhZ3JhbSB8fCAhdGhpcy5kaWFncmFtLm1vZGVsIHx8IHRoaXMuc2tpcHNEaWFncmFtVXBkYXRlKSByZXR1cm47XHJcbiAgICAvLyBpZiBjbGVhciB3YXMganVzdCBjYWxsZWQsIHRyZWF0IHRoaXMgYXMgaW5pdGlhbFxyXG4gICAgaWYgKHRoaXMud2FzQ2xlYXJlZCkge1xyXG4gICAgICB0aGlzLmRpYWdyYW0uZGVsYXlJbml0aWFsaXphdGlvbigoKSA9PiB7XHJcbiAgICAgICAgTmdEaWFncmFtSGVscGVyLm1lcmdlQXBwRGF0YVdpdGhNb2RlbCh0aGlzLCB0cnVlKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHRoaXMud2FzQ2xlYXJlZCA9IGZhbHNlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgTmdEaWFncmFtSGVscGVyLm1lcmdlQXBwRGF0YVdpdGhNb2RlbCh0aGlzKTtcclxuICAgIH1cclxuICB9IC8vIGVuZCBuZ09uQ2hhbmdlc1xyXG5cclxuICAvKipcclxuICAgKiBDbGVhcnMgdGhlIGRpYWdyYW0gb2YgYWxsIG5vZGVzLCBsaW5rcywgYW5kIG1vZGVsIGRhdGEuXHJcbiAgICogQWxzbyBjbGVhcnMgdGhlIFVuZG9NYW5hZ2VyIGhpc3RvcnkgYW5kIGNsaXBib2FyZC5cclxuICAgKiBUaGUgbmV4dCBzdGF0ZSB1cGRhdGUgd2lsbCBiZSB0cmVhdGVkIGFzIGRpYWdyYW0gaW5pdGlhbGl6YXRpb24uXHJcbiAgICovXHJcbiAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcclxuICAgIGNvbnN0IGRpYWdyYW0gPSB0aGlzLmRpYWdyYW07XHJcbiAgICBpZiAoZGlhZ3JhbSAhPT0gbnVsbCkge1xyXG4gICAgICBkaWFncmFtLmNsZWFyKCk7XHJcbiAgICAgIHRoaXMud2FzQ2xlYXJlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgfSAvLyBlbmQgY2xlYXIgZnVuY3Rpb25cclxuXHJcbiAgLyoqXHJcbiAgICogU2V0IHRoaXMuZGlhZ3JhbS5kaXYgdG8gbnVsbCwgcmVtb3ZpbmcgYWxsIGV2ZW50IGxpc3RlbmVyc1xyXG4gICAqL1xyXG4gIHB1YmxpYyBuZ09uRGVzdHJveSgpIHtcclxuICAgIHRoaXMuZGlhZ3JhbS5kaXYgPSBudWxsOyAvLyByZW1vdmVzIGV2ZW50IGxpc3RlbmVyc1xyXG4gIH0gLy8gZW5kIG5nT25EZXN0cm95IGZ1bmN0aW9uXHJcblxyXG59XHJcbiJdfQ==